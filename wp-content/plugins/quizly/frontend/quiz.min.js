const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;!function(t){"use strict";let e=0,o=0,n=0,a={};function s(e,o,n=400,a=300){if(o){let o=e.offset();setTimeout(function(){t("html, body").stop().animate({scrollTop:o.top-96},n)},a)}}function i(n,a,s){let i=0;if(t(".qy-o-result").each(function(){let o=parseInt(t(this).attr("data-score-from")),n=parseInt(t(this).attr("data-score-to"));o<=e&&n>=e&&(i=parseInt(t(this).attr("data-result-number")))}),i>0){let l=t("#qy-o-result-"+i.toString()),r=e,c="";a||(c='<span class="qy-o-score-text">'+__(`¡Acertaste ${r} de ${o} preguntas!`,"quizly")+"</span>"),c+='<span class="qy-o-retake-quiz"><span class="dashicons dashicons-image-rotate"></span>'+__("Rehacer quiz","quizly")+"</span>",a?l.find(".qy-o-result-title").after(c):l.find(".qy-o-score-wrapper").append(c),t(".qy-o-retake-quiz").on("click",function(){let e=t("#qy-o-question-1").offset();t("html, body").stop().animate({scrollTop:e.top-96},200,function(){location.reload()})}),l.show();let u=l.offset();setTimeout(()=>{t("html, body").stop().animate({scrollTop:u.top-96},400),function(o){let n=o.attr("data-id"),a=o.attr("data-user-type"),s=o.attr("data-user-id"),i=o.find(".qy-o-newsletter").find(".qy-o-email").val(),l=o.attr("data-newsletter-enabled"),r="";(l="1"==l)&&i&&(r=i);let c={_ajax_nonce:qy_o_ajax_nonce,action:"qy_o_save_result_ajax",quiz_id:parseInt(n),user_type:a,user_id:parseInt(s),score:e,user_email:r};t.post({url:qy_o_ajax_url,data:c,success:function(t){},error:function(t){console.log(t)}})}(s)},n)}else console.log("Ugh... cannot find an appropriate result :O")}t(".qy-o-answer-btn").hover(function(){let e=parseInt(t(this).closest(".qy-o-answer").attr("data-answer-number"));t(this).closest(".answers-list").find(".qy-o-answer").each(function(){parseInt(t(this).attr("data-answer-number"))!=e&&t(this).css("opacity","0.55")})},function(){t(this).closest(".qy-o-answers-list").find(".qy-o-answer").each(function(){t(this).css("opacity","1")})}),t(".qy-o-answer-btn").click(function(i){i.preventDefault();let l=t(this).closest(".qy-o-question"),r=l.closest(".qy-o-quiz-container"),u=r.attr("data-weighted");u="1"==u;let d=r.attr("data-explanations-enabled");d="1"==d,o=r.find(".qy-o-question").length,0===n&&(n=o);let y=parseInt(r.attr("data-last-question")),p=parseInt(l.attr("data-question-number")),q=t(this).closest(".qy-o-answer"),f=parseInt(q.attr("data-w")),h=!1,m="",_=y==p;u?q.addClass("qy-o-answer-weighted"):1===f?(q.addClass("qy-o-answer-correct"),h=!0):q.addClass("qy-o-answer-wrong");let w=l.find(".qy-o-quiz-title"),b=l.find(".qy-o-question-thumbnail"),g=l.find(".qy-o-answers-list");jQuery.isEmptyObject(a)&&(a.title=r.find(".qy-o-quiz-title").text(),a.desc=r.find(".qy-o-description").text(),a.thumbnail=r.find(".qy-o-quiz-thumbnail").attr("src"));let x,z,k=r.attr("data-autoscroll");k="1"==k;let v,I=null;u||(z=(x=l.find(".qy-o-question-explanation")).find(".qy-o-question-explanation-inside"),I=x.find(".qy-o-explanation-title"),v=x.find(".qy-o-correct-answer")),w.css("opacity","0.4"),b.css("opacity","0.4"),g.css("opacity","0.6"),u||l.find(".qy-o-answer").each(function(){1===parseInt(t(this).attr("data-w"))&&(m=t(this).find(".qy-o-answer-caption").html())}),u?e+=f:(h?(z.addClass("qy-o-correct"),I.html(__("¡Correcto!","quizly")).addClass("qy-o-correct"),e+=f):(z.addClass("qy-o-wrong"),I.html(__("¡Incorrecto!","quizly")).addClass("qy-o-wrong")),v.html('<span class="dashicons dashicons-yes"></span>'+m)),g.each(function(){t(this).find(".qy-o-answer-btn").unbind("click")}),n-=1,u||x.show(),_?n>0?setTimeout(()=>{alert(__("It seems there are some unanswered questions. You need to take care of them in order to see the final result.","quizly"))},300):setTimeout(()=>{c(300,u,I,r)},1e3):0===n?c(300,u,I,r):u?s(l.next(),k,400,200):s(I,k,200)}),t(".qy-o-share-facebook").click(function(e){let o=t(this).attr("data-url"),n=t(this).closest(".qy-o-quiz-container").attr("data-title");FB.ui({method:"share",href:o,quote:n},function(t){})}),t(".qy-o-share-twitter").click(function(e){let o=t(this).attr("data-url"),n=t(this).closest(".qy-o-quiz-container").attr("data-title"),a="https://twitter.com/intent/tweet?text="+(n=n.replace(" ","%20"))+"%0A"+o;window.open(a,"","width=640,height=480")}),t(".qy-o-share-link").on("click",function(e){let o=t(location).attr("href");t("body").append('<input type="text" id="qy-o-copy-url" />');let n=t("#qy-o-copy-url");n.val(o),n.select(),document.execCommand("copy"),n.remove(),t(this).find(".qy-o-share-link-text").text(__("Copied!","quizly"))});let l=t(".qy-o-quiz-container").attr("data-fb-app");function r(e,o=!1,n=null,a){let s=a.find(".qy-o-newsletter"),l=s.find(".qy-o-email"),r=s.find(".qy-o-subscribe"),c=t(".qy-o-newsletter .dashicons-no");c&&c.on("click",function(t){i(e,o,a),s.hide()}),r.on("click",function(t){t.preventDefault();let n=(l=s.find(".qy-o-email")).val();/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n)?(!function(t,e,o){let n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);let a="expires="+n.toUTCString();document.cookie=t+"="+e+";"+a+";path=/"}("qy_o_has_email","yes",60),i(e,o,a),s.hide()):l.val(__("Please enter a valid email address!","quiz_fox")).addClass("qy-o-input-invalid")}),l.on("focus",function(){t(this).val(""),t(this).removeClass("qy-o-input-invalid")}),s.show();let u=s.offset();if(n){let e=n.offset();t("html, body").stop().animate({scrollTop:e.top-96},400),setTimeout(function(){t("html, body").stop().animate({scrollTop:u.top-96},400)},2e3)}else t("html, body").stop().animate({scrollTop:u.top-96},400)}function c(t,e=!1,o=null,n){let a,s=n.attr("data-user-type");"guest"==s&&(a=function(t){let e=t+"=",o=decodeURIComponent(document.cookie).split(";");for(let t=0;t<o.length;t++){let n=o[t];for(;" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""}("qy_o_has_email"));let l=n.attr("data-newsletter-enabled");l="1"==l,"guest"==s&&"yes"!=a&&l?r(t,e,o,n):i(t,e,n)}t.ajaxSetup({cache:!0}),t.getScript("https://connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:l,version:"v2.7"}),t("#loginbutton,#feedbutton").removeAttr("disabled"),FB.getLoginStatus(function(){console.log("Facebook SDK: Status updated.")})})}(jQuery);